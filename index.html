<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aldonia Premium LMS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4f46e5; --secondary: #6366f1; --bg: #f3f4f6; 
            --sidebar: #ffffff; --card: #ffffff; --text: #1f2937; --success: #10b981;
        }

        /* Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù„ÙŠÙ„ÙŠ Ø§Ù„ÙØ®Ù… */
        body.theme-dark {
            --bg: #0f172a; --sidebar: #1e293b; --card: #1e293b; --text: #f8fafb; --primary: #818cf8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); transition: 0.3s; overflow-x: hidden; }

        .app-container { display: flex; min-height: 100vh; }

        /* Sidebar Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ù…Ø±ØªØ¨ */
        aside {
            width: 260px; background: var(--sidebar); border-left: 1px solid rgba(0,0,0,0.05);
            display: flex; flex-direction: column; padding: 25px; position: fixed; height: 100vh; right: 0;
            box-shadow: -5px 0 15px rgba(0,0,0,0.02); z-index: 100;
        }

        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); margin-bottom: 40px; text-align: center; letter-spacing: -1px; }
        
        .nav-link {
            padding: 14px 18px; border-radius: 12px; margin-bottom: 8px; cursor: pointer;
            display: flex; align-items: center; gap: 12px; font-weight: 600; transition: 0.2s;
            color: var(--text); opacity: 0.7; border: none; background: transparent; width: 100%; text-align: right;
        }
        .nav-link:hover, .nav-link.active { background: var(--primary); color: white; opacity: 1; }

        /* Content Area */
        main { flex: 1; margin-right: 260px; padding: 40px; }

        .header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        
        /* Dashboard Cards */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card { 
            background: var(--card); border-radius: 24px; padding: 25px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.02); border: 1px solid rgba(0,0,0,0.05);
            position: relative; overflow: hidden;
        }
        
        /* Professional AI Chat */
        .ai-box { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; }
        .chat-display { height: 180px; overflow-y: auto; margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 15px; font-size: 0.9rem; }

        /* Tables & Lists */
        .list-row { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 20px; background: var(--bg); border-radius: 15px; margin-bottom: 10px;
        }

        /* Controls */
        input, select { 
            width: 100%; padding: 14px; border-radius: 14px; border: 2px solid #e5e7eb; 
            margin-top: 10px; outline: none; transition: 0.2s; background: var(--card); color: var(--text);
        }
        input:focus { border-color: var(--primary); }
        .btn-action { 
            background: var(--primary); color: white; border: none; padding: 14px 25px; 
            border-radius: 14px; cursor: pointer; font-weight: 700; width: 100%; margin-top: 15px;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.2);
        }
        .btn-action:hover { transform: translateY(-2px); }

        .badge { padding: 4px 12px; border-radius: 8px; font-size: 0.75rem; background: var(--success); color: white; }

        /* Tab Management */
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 768px) {
            aside { width: 80px; padding: 15px 5px; }
            aside .nav-link span, aside .logo { display: none; }
            main { margin-right: 80px; padding: 20px; }
        }
    </style>
</head>
<body id="bodyRoot">

    <div class="app-container">
        <aside>
            <div class="logo">ALDONIA</div>
            <button class="nav-link active" onclick="showTab('stDash', this)"><i class="fas fa-home"></i> <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></button>
            <button class="nav-link" onclick="showTab('teachersArea', this)"><i class="fas fa-chalkboard-teacher"></i> <span>Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</span></button>
            <button class="nav-link" onclick="showTab('quizArea', this)"><i class="fas fa-file-alt"></i> <span>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</span></button>
            <button class="nav-link" onclick="showTab('adminArea', this)" style="margin-top: auto; border-top: 1px solid #eee; padding-top: 20px;"><i class="fas fa-user-shield"></i> <span>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></button>
        </aside>

        <main>
            <div id="loginGate" class="card" style="max-width: 450px; margin: 10vh auto; text-align: center;">
                <i class="fas fa-user-graduate fa-3x" style="color: var(--primary); margin-bottom: 20px;"></i>
                <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©</h2>
                <p style="opacity: 0.6; margin-bottom: 20px;">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¯Ø±ÙˆØ³Ùƒ</p>
                <input type="text" id="stNameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
                <button class="btn-action" onclick="loginStudent()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© <i class="fas fa-arrow-left"></i></button>
            </div>

            <div id="mainDashboard" style="display: none;">
                
                <div class="header-bar">
                    <div>
                        <h1 id="userGreeting">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ</h1>
                        <p id="stPrivateMsg" style="color: var(--primary); font-weight: 600;"></p>
                    </div>
                    <div class="badge" id="statusBadge">Ø·Ø§Ù„Ø¨ Ù†Ø´Ø·</div>
                </div>

                <div id="stDash" class="section active">
                    <div class="grid">
                        <div class="card ai-box">
                            <h3><i class="fas fa-robot"></i> Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ AI</h3>
                            <div class="chat-display" id="aiDisplay">ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="aiInp" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø£ÙŠ Ø´ÙŠØ¡..." style="margin:0; border:none;">
                                <button class="btn-action" style="margin:0; width: 50px; background: white; color: var(--primary);" onclick="askAI()"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-clock"></i> Ø­ØµØµÙƒ Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©</h3>
                            <div id="stPersonalSched" style="margin-top: 15px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­ØµØµ Ø®Ø§ØµØ© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>
                        </div>
                    </div>
                </div>

                <div id="teachersArea" class="section">
                    <div class="card">
                        <h2>ğŸ‘¨â€ğŸ« ÙƒØ§Ø¯Ø± Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</h2>
                        <div id="stTeachersList" class="grid" style="margin-top: 20px;"></div>
                    </div>
                </div>

                <div id="quizArea" class="section">
                    <div class="card" id="quizCard">
                        <h2>ğŸ“ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
                        <div id="quizBox" style="margin-top: 20px;">
                            <div id="qContent">
                                <h3 id="qText">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</h3>
                                <div id="qOpts"></div>
                                <button class="btn-action" id="nextBtn" style="display:none" onclick="submitQ()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
                            </div>
                            <div id="resBox" style="display:none; text-align:center;">
                                <h2 id="finalScore"></h2>
                                <button class="btn-action" onclick="resetQuiz()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="adminArea" class="section">
                    <div id="adLoginCard" class="card" style="max-width: 400px; margin: auto;">
                        <h3>Ø·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
                        <input type="password" id="adPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                        <button class="btn-action" onclick="adminAuth()">ØªØ­Ù‚Ù‚</button>
                    </div>

                    <div id="adControlPanel" style="display: none;">
                        <div class="grid">
                            <div class="card">
                                <h4>ğŸ¨ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø«ÙŠÙ…</h4>
                                <button class="btn-action" onclick="setTheme('theme-dark')">Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
                                <button class="btn-action" style="background: #fff; color: #000;" onclick="setTheme('')">Ø§Ù„Ø«ÙŠÙ… Ø§Ù„ÙØ§ØªØ­</button>
                            </div>
                            <div class="card">
                                <h4>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</h4>
                                <div id="adStList" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                        </div>

                        <div class="card" id="stEditor" style="display: none; background: #fefce8;">
                            <h4>ØªØ®ØµÙŠØµ Ø¨ÙŠØ§Ù†Ø§Øª: <span id="targetName"></span></h4>
                            <input type="text" id="p_sched" placeholder="Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø­ØµØµ">
                            <button class="btn-action" onclick="savePrivate()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                        </div>

                        <div class="card">
                            <h4>ğŸ‘¨â€ğŸ« Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù…</h4>
                            <input type="text" id="tName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…">
                            <input type="text" id="tSub" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©">
                            <button class="btn-action" onclick="addTeacher()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù…</button>
                        </div>

                        <div class="card">
                            <h4>ğŸ“ Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„</h4>
                            <input type="text" id="newQ" placeholder="Ø§Ù„Ø³Ø¤Ø§Ù„">
                            <input type="text" id="optA" placeholder="Ø®ÙŠØ§Ø± 1">
                            <input type="text" id="optB" placeholder="Ø®ÙŠØ§Ø± 2">
                            <select id="correct"><option value="0">Ø®ÙŠØ§Ø± 1 Ù‡Ùˆ Ø§Ù„ØµØ­ÙŠØ­</option><option value="1">Ø®ÙŠØ§Ø± 2 Ù‡Ùˆ Ø§Ù„ØµØ­ÙŠØ­</option></select>
                            <button class="btn-action" onclick="addQuiz()">Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„</button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        let currentUser = "";
        let currentQ = 0, score = 0, selected = null, editingSt = "";

        function showTab(id, btn) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
        }

        // Student Logic
        function loginStudent() {
            const n = document.getElementById('stNameInput').value;
            if(!n) return;
            currentUser = n;
            let list = JSON.parse(localStorage.getItem('ald_sts') || '[]');
            if(!list.includes(n)) list.push(n);
            localStorage.setItem('ald_sts', JSON.stringify(list));

            document.getElementById('loginGate').style.display = 'none';
            document.getElementById('mainDashboard').style.display = 'block';
            document.getElementById('userGreeting').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ${n} âœ¨`;
            render();
        }

        function askAI() {
            const q = document.getElementById('aiInp').value;
            const display = document.getElementById('aiDisplay');
            if(!q) return;
            display.innerHTML += `<div style="text-align:left; opacity:0.8;">Ø£Ù†Øª: ${q}</div>`;
            setTimeout(() => {
                display.innerHTML += `<div style="font-weight:bold; margin-top:5px;">AI: Ù†ØµÙŠØ­Ø© Ø°ÙƒÙŠØ©.. Ø¨Ø®ØµÙˆØµ "${q}"ØŒ Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù‡ÙŠ Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© Ù„Ù…Ø¯Ø© 50 Ø¯Ù‚ÙŠÙ‚Ø© Ø«Ù… Ø±Ø§Ø­Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚.</div>`;
                display.scrollTop = display.scrollHeight;
            }, 600);
            document.getElementById('aiInp').value = "";
        }

        // Admin Logic
        function adminAuth() {
            if(document.getElementById('adPass').value === "AAAA1234") {
                document.getElementById('adLoginCard').style.display = 'none';
                document.getElementById('adControlPanel').style.display = 'block';
                render();
            }
        }

        function addTeacher() {
            let ts = JSON.parse(localStorage.getItem('ald_ts') || '[]');
            ts.push({id: Date.now(), n: document.getElementById('tName').value, s: document.getElementById('tSub').value});
            localStorage.setItem('ald_ts', JSON.stringify(ts));
            render();
        }

        function addQuiz() {
            let qs = JSON.parse(localStorage.getItem('ald_qs') || '[]');
            qs.push({t: document.getElementById('newQ').value, o: [document.getElementById('optA').value, document.getElementById('optB').value], c: document.getElementById('correct').value});
            localStorage.setItem('ald_qs', JSON.stringify(qs));
            alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„");
        }

        function openEdit(n) {
            editingSt = n;
            document.getElementById('stEditor').style.display = 'block';
            document.getElementById('targetName').innerText = n;
        }

        function savePrivate() {
            localStorage.setItem('p_'+editingSt, document.getElementById('p_sched').value);
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù„Ù„Ø·Ø§Ù„Ø¨ " + editingSt);
            document.getElementById('stEditor').style.display = 'none';
            render();
        }

        function render() {
            document.getElementById('bodyRoot').className = localStorage.getItem('ald_theme') || '';
            const ts = JSON.parse(localStorage.getItem('ald_ts') || '[]');
            const sts = JSON.parse(localStorage.getItem('ald_sts') || '[]');
            const qs = JSON.parse(localStorage.getItem('ald_qs') || '[]');

            // Render Teachers
            document.getElementById('stTeachersList').innerHTML = ts.map(t => `
                <div class="card" style="text-align:center;">
                    <i class="fas fa-user-circle fa-3x" style="color:var(--primary); margin-bottom:10px;"></i>
                    <h4>${t.n}</h4>
                    <p style="opacity:0.6;">${t.s}</p>
                </div>
            `).join('');

            // Render Admin Student List
            document.getElementById('adStList').innerHTML = sts.map(s => `
                <div class="list-row"><span>${s}</span> <button class="badge" style="border:none; cursor:pointer;" onclick="openEdit('${s}')">ØªØ®ØµÙŠØµ</button></div>
            `).join('');

            // Private Data
            if(currentUser) {
                const p = localStorage.getItem('p_'+currentUser);
                document.getElementById('stPersonalSched').innerHTML = p ? `<div class="badge">${p}</div>` : "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ø®ØµØµØ© Ù„Ùƒ.";
            }

            // Quiz Load
            if(qs.length > 0) {
                const q = qs[currentQ];
                document.getElementById('qText').innerText = q.t;
                document.getElementById('qOpts').innerHTML = q.o.map((o,i) => `
                    <div class="list-row" style="cursor:pointer; border:1px solid #ddd;" onclick="selected=${i}; this.style.borderColor='var(--primary)'">${o}</div>
                `).join('');
                document.getElementById('nextBtn').style.display = 'block';
            }
        }

        function submitQ() {
            const qs = JSON.parse(localStorage.getItem('ald_qs') || '[]');
            if(selected == qs[currentQ].c) score++;
            currentQ++; selected = null;
            if(currentQ < qs.length) render();
            else {
                document.getElementById('qContent').style.display = 'none';
                document.getElementById('resBox').style.display = 'block';
                document.getElementById('finalScore').innerText = `Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${qs.length}`;
            }
        }

        function setTheme(t) { localStorage.setItem('ald_theme', t); render(); }
        function resetQuiz() { currentQ=0; score=0; document.getElementById('qContent').style.display='block'; document.getElementById('resBox').style.display='none'; render(); }

        window.onload = render;
    </script>
</body>
</html>
