<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aldonia AI Academy | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --card: #ffffff; --text: #1e293b; --bot-bubble: #6366f1; }
        body.theme-dark { --primary: #818cf8; --bg: #0f172a; --card: #1e293b; --text: #f1f5f9; --bot-bubble: #4338ca; }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); transition: 0.3s; }

        .container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
        .card { background: var(--card); border-radius: 20px; padding: 1.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 1.5rem; border: 1px solid rgba(0,0,0,0.05); }

        /* AI Chat Enhanced UI */
        .chat-container { display: flex; flex-direction: column; height: 350px; }
        .chat-window { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px; background: rgba(0,0,0,0.02); border-radius: 15px; margin-bottom: 10px; }
        .bubble { max-width: 85%; padding: 10px 15px; border-radius: 18px; font-size: 0.95rem; line-height: 1.4; position: relative; animation: pop 0.3s ease; }
        .bubble.bot { align-self: flex-start; background: var(--bot-bubble); color: white; border-bottom-right-radius: 4px; }
        .bubble.user { align-self: flex-end; background: #e2e8f0; color: #1e293b; border-bottom-left-radius: 4px; }
        @keyframes pop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .typing { font-size: 0.8rem; color: var(--primary); font-style: italic; margin-bottom: 5px; display: none; }

        .input-group { display: flex; gap: 8px; }
        input { flex: 1; padding: 12px 18px; border-radius: 25px; border: 2px solid #e2e8f0; outline: none; transition: 0.3s; background: var(--card); color: var(--text); }
        input:focus { border-color: var(--primary); }
        .send-btn { background: var(--primary); color: white; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .send-btn:hover { transform: rotate(-15deg) scale(1.1); }

        /* Admin Tools */
        .admin-switch { display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #fef2f2; border-radius: 10px; margin-bottom: 10px; border: 1px solid #fee2e2; }
    </style>
</head>
<body id="appBody">

    <nav style="background: var(--card); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <h2 style="color: var(--primary);"><i class="fas fa-brain"></i> ALDONIA AI</h2>
        <div>
            <button onclick="switchView('stView')" style="padding: 8px 15px; border-radius: 10px; border: none; cursor: pointer;">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</button>
            <button onclick="switchView('adView')" style="padding: 8px 15px; border-radius: 10px; border: none; cursor: pointer;">Ø§Ù„Ù…Ø¯ÙŠØ±</button>
        </div>
    </nav>

    <div class="container">
        <div id="stView" class="view-section">
            <div id="stLogin" class="card" style="max-width: 400px; margin: 5rem auto; text-align: center;">
                <h3>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø°ÙƒÙŠØ©</h3>
                <input type="text" id="stName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
                <button onclick="stEntry()" style="width: 100%; padding: 12px; margin-top: 10px; background: var(--primary); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">Ø¯Ø®ÙˆÙ„</button>
            </div>

            <div id="stDash" style="display: none;">
                <div class="card" style="background: linear-gradient(to left, var(--primary), #4338ca); color: white;">
                    <h2 id="welcome">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ</h2>
                    <p id="privateData" style="margin-top: 10px; font-weight: bold;"></p>
                </div>

                <div class="card" id="aiCard">
                    <h3><i class="fas fa-magic"></i> Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯ÙˆÙ†ÙŠØ§ Ø§Ù„Ø°ÙƒÙŠ (ÙØ¹Ù‘Ø§Ù„ Ø§Ù„Ø¢Ù†)</h3>
                    <div class="chat-container">
                        <div id="chatBox" class="chat-window">
                            <div class="bubble bot">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø±ÙÙŠÙ‚Ùƒ Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¯ÙˆÙ†ÙŠØ§. ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
                        </div>
                        <div id="isTyping" class="typing">Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙÙƒØ±...</div>
                        <div class="input-group">
                            <input type="text" id="aiInput" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ù†ØµÙŠØ­Ø© Ø¯Ø±Ø§Ø³ÙŠØ© Ø£Ùˆ Ù…Ø³Ø§Ø¹Ø¯Ø©...">
                            <button class="send-btn" onclick="processAI()"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="adView" class="view-section" style="display: none;">
            <div class="card">
                <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø°ÙƒÙŠØ© âš™ï¸</h2>
                <div class="admin-switch">
                    <span><b>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ø·Ù„Ø§Ø¨</b></span>
                    <input type="checkbox" id="aiToggle" checked onchange="toggleAI()">
                </div>
                
                <div style="margin-top: 20px;">
                    <h4>ğŸ¨ Ù…Ø¸Ù‡Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹</h4>
                    <button onclick="setTheme('theme-dark')" style="background: #1e293b; color: white; padding: 10px; border: none; border-radius: 8px; cursor: pointer;">Ø«ÙŠÙ… Ù„ÙŠÙ„ÙŠ</button>
                    <button onclick="setTheme('')" style="background: #6366f1; color: white; padding: 10px; border: none; border-radius: 8px; cursor: pointer;">Ø«ÙŠÙ… Ø£Ø³Ø§Ø³ÙŠ</button>
                </div>

                <div style="margin-top: 20px;">
                    <h4>ğŸ‘¥ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†</h4>
                    <div id="adStudentList"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = "";

        function switchView(id) {
            document.querySelectorAll('.view-section').forEach(v => v.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }

        function stEntry() {
            const name = document.getElementById('stName').value;
            if(!name) return alert("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ");
            currentUser = name;
            document.getElementById('stLogin').style.display = 'none';
            document.getElementById('stDash').style.display = 'block';
            document.getElementById('welcome').innerText = `Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ ${name} ğŸ‘‹`;
            
            // Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù… Ù„Ù„Ø£Ø¯Ù…Ù†
            let list = JSON.parse(localStorage.getItem('ald_students') || '[]');
            if(!list.includes(name)) list.push(name);
            localStorage.setItem('ald_students', JSON.stringify(list));
            renderAdmin();
        }

        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ù€ AI Ø§Ù„ÙØ¹Ø§Ù„ ---
        function processAI() {
            const input = document.getElementById('aiInput');
            const box = document.getElementById('chatBox');
            const typing = document.getElementById('isTyping');
            const query = input.value.trim();
            
            if(!query) return;

            // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            box.innerHTML += `<div class="bubble user">${query}</div>`;
            input.value = "";
            box.scrollTop = box.scrollHeight;

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªÙÙƒÙŠØ±
            typing.style.display = "block";

            setTimeout(() => {
                let response = "";
                const q = query.toLowerCase();

                // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„Ù…Ø§Øª
                if(q.includes("Ø§Ù…ØªØ­Ø§Ù†") || q.includes("Ø§Ø®ØªØ¨Ø§Ø±")) {
                    response = "Ù„Ø§ ØªÙ‚Ù„Ù‚ Ù…Ù† Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª! Ø§Ù„Ø³Ø± ÙŠÙƒÙ…Ù† ÙÙŠ Ø­Ù„ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ÙˆØªÙ†Ø¸ÙŠÙ… ÙˆÙ‚ØªÙƒ. Ù‡Ù„ ØªØ±ÙŠØ¯ Ù†ØµÙŠØ­Ø© ÙÙŠ Ù…Ø§Ø¯Ø© Ù…Ø¹ÙŠÙ†Ø©ØŸ";
                } else if(q.includes("Ø¯Ø±Ø§Ø³Ø©") || q.includes("Ø§Ø¯Ø±Ø³")) {
                    response = "Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„Ø¯Ø±Ø§Ø³Ø© Ù‡ÙŠ ØªÙ‚Ù†ÙŠØ© (Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ): 25 Ø¯Ù‚ÙŠÙ‚Ø© ØªØ±ÙƒÙŠØ² Ø«Ù… 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø±Ø§Ø­Ø©. Ø¬Ø±Ø¨Ù‡Ø§ Ø§Ù„Ø¢Ù†!";
                } else if(q.includes("Ø´ÙƒØ±Ø§") || q.includes("ÙŠØ³Ù„Ù…Ùˆ")) {
                    response = "Ø§Ù„Ø¹ÙÙˆ! Ø£Ù†Ø§ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙŠØ§ Ø¨Ø·Ù„. Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ!";
                } else if(q.includes("Ø§Ø³Ù…ÙŠ")) {
                    response = `Ø§Ø³Ù…Ùƒ Ø§Ù„Ø¬Ù…ÙŠÙ„ Ù‡Ùˆ ${currentUser}ØŒ ÙˆØ£Ù†Øª Ù…Ù† Ø£ÙƒØ«Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ ØªÙ…ÙŠØ²Ø§Ù‹ ÙÙŠ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©!`;
                } else {
                    response = "Ø³Ø¤Ø§Ù„ Ø±Ø§Ø¦Ø¹! Ø£Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠ Ø§Ù„Ø¯Ø±Ø³ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø£Ø³ØªØ§Ø° ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ.";
                }

                typing.style.display = "none";
                box.innerHTML += `<div class="bubble bot">${response}</div>`;
                box.scrollTop = box.scrollHeight;
            }, 1200);
        }

        function toggleAI() {
            const isVisible = document.getElementById('aiToggle').checked;
            localStorage.setItem('ai_status', isVisible);
            document.getElementById('aiCard').style.opacity = isVisible ? "1" : "0.3";
            document.getElementById('aiCard').style.pointerEvents = isVisible ? "all" : "none";
        }

        function setTheme(t) {
            document.getElementById('appBody').className = t;
            localStorage.setItem('ald_theme', t);
        }

        function renderAdmin() {
            const sts = JSON.parse(localStorage.getItem('ald_students') || '[]');
            document.getElementById('adStudentList').innerHTML = sts.map(s => `<div style="padding:10px; border-bottom:1px solid #eee">ğŸ‘¤ ${s}</div>`).join('');
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            document.getElementById('appBody').className = localStorage.getItem('ald_theme') || '';
        }

        window.onload = renderAdmin;
    </script>
</body>
</html>
