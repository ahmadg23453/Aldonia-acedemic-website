<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aldonia Super Platform | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #4f46e5; --bg: #f8fafc; --card: #ffffff; --text: #1e293b; }
        
        /* Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
        body.theme-dark { --primary: #818cf8; --bg: #0f172a; --card: #1e293b; --text: #f1f5f9; }
        body.theme-royal { --primary: #b45309; --bg: #fffbeb; --card: #ffffff; --text: #78350f; }
        body.theme-forest { --primary: #059669; --bg: #f0fdf4; --card: #ffffff; --text: #064e3b; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); transition: 0.3s ease; line-height: 1.6; }

        /* Navigation */
        nav { background: var(--card); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .nav-btn { padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer; background: rgba(0,0,0,0.05); color: var(--text); font-weight: bold; transition: 0.2s; }
        .nav-btn.active { background: var(--primary); color: white; }

        .container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
        .card { background: var(--card); border-radius: 20px; padding: 1.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 1.5rem; border: 1px solid rgba(0,0,0,0.05); }

        /* Forms */
        input, select, textarea { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 12px; margin-top: 8px; background: var(--card); color: var(--text); outline: none; }
        input:focus { border-color: var(--primary); }
        .btn { background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; transition: 0.2s; }
        .btn-del { background: #fee2e2; color: #ef4444; border: none; padding: 5px 10px; border-radius: 8px; cursor: pointer; }

        /* AI & Quiz UI */
        .chat-box { height: 150px; overflow-y: auto; background: rgba(0,0,0,0.02); border-radius: 12px; padding: 10px; margin-bottom: 10px; }
        .quiz-opt { display: block; padding: 10px; background: rgba(0,0,0,0.03); border: 2px solid transparent; border-radius: 10px; margin-top: 8px; cursor: pointer; }
        .quiz-opt.selected { border-color: var(--primary); background: rgba(79, 70, 229, 0.1); }

        /* Sections */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.05); }
    </style>
</head>
<body id="mainBody">

    <nav>
        <div style="font-size: 1.5rem; font-weight: 900; color: var(--primary);">ALDONIA <span style="color:var(--text)">PRO</span></div>
        <div>
            <button class="nav-btn active" onclick="showTab('stTab')">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</button>
            <button class="nav-btn" onclick="showTab('adTab')">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        </div>
    </nav>

    <div class="container">
        
        <div id="stTab" class="tab-content active">
            <div id="stLogin" class="card" style="max-width: 400px; margin: auto; text-align: center;">
                <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¨Ø·Ù„ ğŸ“</h2>
                <input type="text" id="stNameIn" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
                <button class="btn" onclick="loginStudent()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
            </div>

            <div id="stDashboard" style="display: none;">
                <div class="card" style="background: var(--primary); color: white;">
                    <h2 id="helloSt"></h2>
                    <div id="stPrivateNote" style="margin-top: 10px; font-weight: bold;"></div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <div class="card">
                        <h3>ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ (AI)</h3>
                        <div id="aiChat" class="chat-box">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø§Ø³Ø£Ù„Ù†ÙŠ Ø£ÙŠ Ø´ÙŠØ¡ Ø¹Ù† Ø¯Ø±Ø§Ø³ØªÙƒ..</div>
                        <div style="display: flex; gap: 5px;">
                            <input type="text" id="aiQuery" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ.." style="margin:0">
                            <button class="btn" style="margin:0; width: 60px;" onclick="talkToAI()"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>

                    <div class="card" id="quizCard">
                        <h3>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹</h3>
                        <div id="quizContent">
                            <p id="qText">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
                            <div id="qOpts"></div>
                            <button id="nextQBtn" class="btn" style="display:none" onclick="nextQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
                        </div>
                        <div id="quizResult" style="display:none; text-align:center;">
                            <h3 id="resScore"></h3>
                            <button class="btn" onclick="resetQuiz()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ“š Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ§Ù„Ø­ØµØµ Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
                    <div id="stCoursesList"></div>
                </div>
            </div>
        </div>

        <div id="adTab" class="tab-content">
            <div id="adLogin" class="card" style="max-width: 400px; margin: auto;">
                <h3 style="text-align: center;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ğŸ”</h3>
                <input type="password" id="adPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                <button class="btn" onclick="loginAdmin()">ØªØ­Ù‚Ù‚</button>
            </div>

            <div id="adPanel" style="display: none;">
                <div class="card">
                    <h4>ğŸ¨ Ù…Ø¸Ù‡Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹</h4>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button onclick="changeTheme('theme-dark')" style="background:#1e293b; color:white; padding:10px; border-radius:8px; border:none; cursor:pointer">Ù„ÙŠÙ„ÙŠ</button>
                        <button onclick="changeTheme('theme-royal')" style="background:#b45309; color:white; padding:10px; border-radius:8px; border:none; cursor:pointer">Ù…Ù„ÙƒÙŠ</button>
                        <button onclick="changeTheme('theme-forest')" style="background:#059669; color:white; padding:10px; border-radius:8px; border:none; cursor:pointer">ØºØ§Ø¨Ø©</button>
                        <button onclick="changeTheme('')" style="background:#4f46e5; color:white; padding:10px; border-radius:8px; border:none; cursor:pointer">Ø£Ø³Ø§Ø³ÙŠ</button>
                    </div>
                </div>

                <div class="card">
                    <h4>ğŸ‘¥ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ©</h4>
                    <div id="adStudentsList"></div>
                </div>

                <div id="editBox" class="card" style="display: none; background: #fffbeb;">
                    <h4>ØªØ®ØµÙŠØµ Ù„Ù€: <span id="targetSt"></span></h4>
                    <input type="text" id="p_sched" placeholder="Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø­ØµØµ">
                    <input type="text" id="p_courses" placeholder="Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø´ØªØ±Ùƒ ÙÙŠÙ‡Ø§">
                    <button class="btn" onclick="savePrivate()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                </div>

                <div class="card">
                    <h4>ğŸ“š Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª</h4>
                    <div style="display: flex; gap: 5px;">
                        <input type="text" id="cName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©">
                        <input type="text" id="cPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        <button class="btn" style="width: 100px; margin: 0;" onclick="addCourse()">Ø¥Ø¶Ø§ÙØ©</button>
                    </div>
                    <div id="adCourseList" style="margin-top: 15px;"></div>
                </div>

                <div class="card">
                    <h4>â“ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h4>
                    <input type="text" id="newQ" placeholder="Ø§Ù„Ø³Ø¤Ø§Ù„">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                        <input type="text" id="o1" placeholder="Ø®ÙŠØ§Ø± 1">
                        <input type="text" id="o2" placeholder="Ø®ÙŠØ§Ø± 2">
                        <input type="text" id="o3" placeholder="Ø®ÙŠØ§Ø± 3">
                        <input type="text" id="o4" placeholder="Ø®ÙŠØ§Ø± 4">
                    </div>
                    <select id="correctO">
                        <option value="0">Ø®ÙŠØ§Ø± 1 Ù‡Ùˆ Ø§Ù„ØµØ­ÙŠØ­</option>
                        <option value="1">Ø®ÙŠØ§Ø± 2 Ù‡Ùˆ Ø§Ù„ØµØ­ÙŠØ­</option>
                        <option value="2">Ø®ÙŠØ§Ø± 3 Ù‡Ùˆ Ø§Ù„ØµØ­ÙŠØ­</option>
                        <option value="3">Ø®ÙŠØ§Ø± 4 Ù‡Ùˆ Ø§Ù„ØµØ­ÙŠØ­</option>
                    </select>
                    <button class="btn" style="background: #10b981;" onclick="addQuizQ()">Ø­ÙØ¸ ÙÙŠ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
                </div>
                
                <button class="btn" style="background: #64748b;" onclick="location.reload()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>

    <script>
        const PASS = "AAAA1234";
        let curSt = "";
        let editTarget = "";
        let qIdx = 0, score = 0, selected = null;

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Student Handlers
        function loginStudent() {
            const n = document.getElementById('stNameIn').value;
            if(!n) return;
            curSt = n;
            let list = JSON.parse(localStorage.getItem('ald_sts') || '[]');
            if(!list.includes(n)) list.push(n);
            localStorage.setItem('ald_sts', JSON.stringify(list));
            document.getElementById('stLogin').style.display = 'none';
            document.getElementById('stDashboard').style.display = 'block';
            document.getElementById('helloSt').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ${n} âœ¨`;
            render();
        }

        function talkToAI() {
            const q = document.getElementById('aiQuery').value;
            const chat = document.getElementById('aiChat');
            if(!q) return;
            chat.innerHTML += `<div><b>Ø£Ù†Øª:</b> ${q}</div>`;
            setTimeout(() => {
                chat.innerHTML += `<div style="color:var(--primary)"><b>AI:</b> Ø¨Ø®ØµÙˆØµ Ø³Ø¤Ø§Ù„Ùƒ Ø¹Ù† "${q}"ØŒ Ø£Ù†ØµØ­Ùƒ Ø¨Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ø®ØµØ§Øª ÙˆØ§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†!</div>`;
                chat.scrollTop = chat.scrollHeight;
            }, 600);
            document.getElementById('aiQuery').value = "";
        }

        // Quiz Logic
        function loadQuiz() {
            const qs = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            if(qs.length === 0) return;
            const q = qs[qIdx];
            document.getElementById('qText').innerText = q.text;
            document.getElementById('qOpts').innerHTML = q.opts.map((o, i) => `<div class="quiz-opt" id="opt_${i}" onclick="selOpt(${i})">${o}</div>`).join('');
            document.getElementById('nextQBtn').style.display = 'block';
        }

        function selOpt(i) {
            selected = i;
            document.querySelectorAll('.quiz-opt').forEach(el => el.classList.remove('selected'));
            document.getElementById('opt_'+i).classList.add('selected');
        }

        function nextQuestion() {
            if(selected === null) return;
            const qs = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            if(selected === parseInt(qs[qIdx].correct)) score++;
            qIdx++; selected = null;
            if(qIdx < qs.length) loadQuiz();
            else {
                document.getElementById('quizContent').style.display = 'none';
                document.getElementById('quizResult').style.display = 'block';
                document.getElementById('resScore').innerText = `Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${qs.length}`;
            }
        }

        // Admin Handlers
        function loginAdmin() {
            if(document.getElementById('adPass').value === PASS) {
                document.getElementById('adLogin').style.display = 'none';
                document.getElementById('adPanel').style.display = 'block';
                render();
            } else alert("Ø®Ø·Ø£!");
        }

        function changeTheme(t) {
            document.getElementById('mainBody').className = t;
            localStorage.setItem('ald_theme', t);
        }

        function addCourse() {
            let c = JSON.parse(localStorage.getItem('ald_c') || '[]');
            c.push({id: Date.now(), n: document.getElementById('cName').value, p: document.getElementById('cPrice').value});
            localStorage.setItem('ald_c', JSON.stringify(c));
            render();
        }

        function delCourse(id) {
            let c = JSON.parse(localStorage.getItem('ald_c') || '[]');
            localStorage.setItem('ald_c', JSON.stringify(c.filter(x => x.id !== id)));
            render();
        }

        function addQuizQ() {
            let q = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            q.push({
                text: document.getElementById('newQ').value,
                opts: [document.getElementById('o1').value, document.getElementById('o2').value, document.getElementById('o3').value, document.getElementById('o4').value],
                correct: document.getElementById('correctO').value
            });
            localStorage.setItem('ald_quiz', JSON.stringify(q));
            alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„!");
        }

        function openEdit(name) {
            editTarget = name;
            document.getElementById('editBox').style.display = 'block';
            document.getElementById('targetSt').innerText = name;
            let d = JSON.parse(localStorage.getItem('p_' + name) || '{}');
            document.getElementById('p_sched').value = d.s || "";
            document.getElementById('p_courses').value = d.c || "";
        }

        function savePrivate() {
            localStorage.setItem('p_' + editTarget, JSON.stringify({s: document.getElementById('p_sched').value, c: document.getElementById('p_courses').value}));
            document.getElementById('editBox').style.display = 'none';
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸!");
        }

        function render() {
            document.getElementById('mainBody').className = localStorage.getItem('ald_theme') || '';
            const courses = JSON.parse(localStorage.getItem('ald_c') || '[]');
            const sts = JSON.parse(localStorage.getItem('ald_sts') || '[]');

            // Student
            document.getElementById('stCoursesList').innerHTML = courses.map(c => `<div class="list-item"><span>${c.n}</span> <b>${c.p}</b></div>`).join('');
            if(curSt) {
                const p = JSON.parse(localStorage.getItem('p_' + curSt) || '{}');
                document.getElementById('stPrivateNote').innerHTML = p.s ? `ğŸ“Œ Ø­ØµØµÙƒ: ${p.s} | ğŸ“ Ø¯ÙˆØ±Ø§ØªÙƒ: ${p.c}` : "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§ØµØ© Ø­Ø§Ù„ÙŠØ§Ù‹.";
            }
            loadQuiz();

            // Admin
            document.getElementById('adCourseList').innerHTML = courses.map(c => `<div class="list-item"><span>${c.n}</span> <button class="btn-del" onclick="delCourse(${c.id})">Ø­Ø°Ù</button></div>`).join('');
            document.getElementById('adStudentsList').innerHTML = sts.map(s => `<div class="list-item"><span>ğŸ‘¤ ${s}</span> <button class="nav-btn" style="padding:4px 8px" onclick="openEdit('${s}')">ØªØ®ØµÙŠØµ</button></div>`).join('');
        }

        function resetQuiz() {
            qIdx = 0; score = 0;
            document.getElementById('quizContent').style.display = 'block';
            document.getElementById('quizResult').style.display = 'none';
            loadQuiz();
        }

        window.onload = render;
    </script>
</body>
</html>
