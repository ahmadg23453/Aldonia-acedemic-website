<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>aldonia academy</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }

.tabs { display: flex; gap: 10px; padding: 20px; background: rgba(0,0,0,0.3); position: sticky; top: 0; z-index: 100; }
.tab-btn { padding: 12px 30px; background: rgba(255,255,255,0.2); color: white; border: none; cursor: pointer; border-radius: 8px; font-size: 16px; font-weight: bold; transition: all 0.3s; }
.tab-btn:hover { background: rgba(255,255,255,0.4); }
.tab-btn.active { background: white; color: #667eea; }

.tab-content { display: none; padding: 20px; max-width: 1000px; margin: 0 auto; }
.tab-content.active { display: block; animation: fadeIn 0.3s; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.container { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
h1 { color: #667eea; margin-bottom: 20px; font-size: 28px; }
h2 { color: #764ba2; margin-top: 25px; margin-bottom: 15px; border-bottom: 2px solid #667eea; padding-bottom: 10px; }

input, textarea, button, select { padding: 12px; margin: 10px 0; border: 2px solid #ddd; border-radius: 8px; font-size: 14px; transition: all 0.3s; }
input:focus, textarea:focus, select:focus { border-color: #667eea; box-shadow: 0 0 10px rgba(102,126,234,0.3); outline: none; }
textarea { width: 100%; height: 120px; resize: vertical; }
button { width: 100%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; cursor: pointer; font-weight: bold; }
button:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(102,126,234,0.4); }

.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: bold; }

.course-card, .question-item { background: linear-gradient(135deg, #f5f7fa, #f0f1f5); padding: 15px; margin: 15px 0; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border-left: 5px solid #667eea; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.course-info { flex: 1; }
.course-info h3 { color: #667eea; margin-bottom: 5px; }
.course-info p { color: #666; margin: 3px 0; font-size: 13px; }
.delete-btn, .edit-btn { background: #ff6b6b; padding: 8px 15px; width: auto; margin: 0 5px; border-radius: 5px; }
.delete-btn:hover { background: #ff5252; }
.edit-btn { background: #4ecdc4; }
.edit-btn:hover { background: #45b7aa; }

.ai-chat { background: #f9f9f9; border: 2px solid #667eea; border-radius: 10px; padding: 15px; margin: 20px 0; max-height: 400px; overflow-y: auto; }
.ai-message { margin: 10px 0; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #667eea; }
.user-message { background: #e3f2fd; border-left-color: #764ba2; }
.ai-reply { background: #f0f4ff; border-left-color: #667eea; }

.admin-login { max-width: 400px; margin: 50px auto; }
.password-input { font-size: 16px; }

.color-picker-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0; }
.color-input { display: flex; flex-direction: column; }
.color-input label { margin-bottom: 8px; color: #333; font-weight: bold; }
.color-input input[type="color"] { height: 50px; cursor: pointer; }

.whatsapp-btn { background: #25d366 !important; }
.whatsapp-btn:hover { background: #1fa857 !important; }

.icon-input { display: flex; gap: 10px; align-items: center; }
.icon-input input { flex: 1; }
.emoji-picker { display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; margin: 10px 0; }
.emoji-btn { padding: 8px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; font-size: 20px; }
.emoji-btn:hover { background: #e0e0e0; }

.course-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin: 20px 0; }
.course-box { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.course-box h3 { margin-bottom: 10px; }
.course-box p { font-size: 13px; margin: 5px 0; }

.success-msg { color: green; padding: 12px; background: #e8f5e9; border-radius: 5px; margin: 10px 0; border-left: 4px solid green; }
.error-msg { color: red; padding: 12px; background: #ffebee; border-radius: 5px; margin: 10px 0; border-left: 4px solid red; }

.btn-group { display: flex; gap: 10px; }
.btn-group button { flex: 1; }
</style>
</head>
<body>

<!-- =================== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø§Ù†Ø§Øª =================== -->
<div class="tabs">
  <button class="tab-btn active" onclick="switchTab('user')">ğŸ‘¤ Ø§Ù„Ø·Ø§Ù„Ø¨</button>
  <button class="tab-btn" onclick="switchTab('admin')">ğŸ” Ø§Ù„Ø£Ø¯Ù…Ù†</button>
  <button class="tab-btn" onclick="switchTab('chat')">ğŸ¤– Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
</div>

<!-- =================== Ø®Ø§Ù†Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ =================== -->
<div id="user" class="tab-content active">
  <div class="container">
    <h1>ğŸ“ aldonia academy - Ù…Ù†ØµØ© Ø§Ù„Ø·Ù„Ø§Ø¨</h1>
    
    <div id="loginSection">
      <div class="form-group">
        <label>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
        <input type="email" id="userEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      </div>
      <button onclick="loginUser()">ğŸ”“ Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="userPanel" style="display:none;">
      <h2>ğŸ“š Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
      <div class="course-grid" id="userCoursesList"></div>

      <h2>ğŸ’¬ Ø£Ø³Ø¦Ù„ØªÙƒ</h2>
      <div id="userQuestionsList"></div>
      <div class="form-group">
        <label>â“ Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§:</label>
        <textarea id="userQuestion" placeholder="Ø£ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ ÙˆØ³ÙŠØ¬ÙŠØ¨Ùƒ Ø§Ù„Ø£Ø¯Ù…Ù†..."></textarea>
      </div>
      <button onclick="addUserQuestion()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„</button>

      <div class="btn-group" style="margin-top: 20px;">
        <button onclick="logoutUser()" style="background: #ff6b6b;">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>
  </div>
</div>

<!-- =================== Ø®Ø§Ù†Ø© Ø§Ù„Ø£Ø¯Ù…Ù† =================== -->
<div id="admin" class="tab-content">
  <div class="container">
    <h1>ğŸ” Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h1>
    
    <div id="adminLoginSection">
      <div class="admin-login">
        <div class="form-group">
          <label>ğŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
          <input type="password" id="adminPassword" class="password-input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        </div>
        <button onclick="loginAdmin()">ğŸ”“ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
      </div>
    </div>

    <div id="adminPanel" style="display:none;">
      <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª -->
      <h2>ğŸ“š Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª</h2>
      <div id="adminCoursesList"></div>
      <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h3 style="color: #667eea; margin-bottom: 15px;">â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
        <div class="form-group">
          <label>ğŸ“Œ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
          <input type="text" id="adminCourseName" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©">
        </div>
        <div class="form-group">
          <label>ğŸ‘¨â€ğŸ« Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…:</label>
          <input type="text" id="adminTeacherName" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯">
        </div>
        <div class="form-group">
          <label>â° ÙˆÙ‚Øª Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
          <input type="text" id="adminCourseTime" placeholder="Ù…Ø«Ø§Ù„: 12:00 PM">
        </div>
        <div class="form-group">
          <label>ğŸ“± Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù…:</label>
          <input type="text" id="adminTeacherPhone" placeholder="Ù…Ø«Ø§Ù„: 966501234567">
        </div>
        <div class="form-group">
          <label>ğŸ¨ Ø§Ø®ØªØ± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ù„Ø¯ÙˆØ±Ø©:</label>
          <div class="emoji-picker">
            <button class="emoji-btn" onclick="setIcon('ğŸ“–')">ğŸ“–</button>
            <button class="emoji-btn" onclick="setIcon('ğŸ”¬')">ğŸ”¬</button>
            <button class="emoji-btn" onclick="setIcon('ğŸ§®')">ğŸ§®</button>
            <button class="emoji-btn" onclick="setIcon('ğŸŒ')">ğŸŒ</button>
            <button class="emoji-btn" onclick="setIcon('ğŸ¨')">ğŸ¨</button>
            <button class="emoji-btn" onclick="setIcon('ğŸ’»')">ğŸ’»</button>
            <button class="emoji-btn" onclick="setIcon('ğŸ“š')">ğŸ“š</button>
            <button class="emoji-btn" onclick="setIcon('ğŸ“')">ğŸ“</button>
          </div>
          <input type="text" id="adminCourseIcon" placeholder="Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©" readonly style="background: #e8e8e8;">
        </div>
        <button onclick="addAdminCourse()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯ÙˆØ±Ø©</button>
      </div>

      <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
      <h2>ğŸ’¬ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</h2>
      <div id="adminQuestionsList"></div>
      <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h3 style="color: #667eea; margin-bottom: 15px;">â• Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„</h3>
        <div class="form-group">
          <label>ğŸ“ Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø©:</label>
          <textarea id="adminNewQuestion" placeholder="Ø£ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©..."></textarea>
        </div>
        <button onclick="addAdminQuestion()">ğŸ“¤ Ø¥Ø¶Ø§ÙØ© Ø¥Ø¬Ø§Ø¨Ø©</button>
      </div>

      <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… -->
      <h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ…</h2>
      <div class="color-picker-group">
        <div class="color-input">
          <label>ğŸ¨ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:</label>
          <input type="color" id="mainColor" value="#667eea">
        </div>
        <div class="color-input">
          <label>ğŸ¨ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ:</label>
          <input type="color" id="secondColor" value="#764ba2">
        </div>
      </div>
      <button onclick="applyDesign()">âœ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙ…ÙŠÙ…</button>

      <button onclick="logoutAdmin()" style="background: #ff6b6b; margin-top: 20px;">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
</div>

<!-- =================== Ø®Ø§Ù†Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ =================== -->
<div id="chat" class="tab-content">
  <div class="container">
    <h1>ğŸ¤– Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h1>
    
    <div id="loginChatSection">
      <div class="form-group">
        <label>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
        <input type="email" id="chatEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      </div>
      <button onclick="loginChat()">ğŸ”“ Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="chatPanel" style="display:none;">
      <div class="ai-chat" id="chatMessages"></div>
      <div class="form-group">
        <label>ğŸ’­ Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</label>
        <textarea id="chatInput" placeholder="Ø£ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."></textarea>
      </div>
      <button onclick="sendChatMessage()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„</button>
      <button onclick="logoutChat()" style="background: #ff6b6b; margin-top: 10px;">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
</div>

<script>
const ADMIN_PASSWORD = "1234";
const aiResponses = {
  "Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…": "ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡ ğŸ‘‹",
  "Ù…Ø§ Ø§Ø³Ù…Ùƒ": "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¯ÙˆÙ†ÙŠØ§ ğŸ¤–",
  "Ø´Ù†Ùˆ Ø£ÙØ¶Ù„ Ù…Ø§Ø¯Ø©": "ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù…Ù‡Ù…Ø©ØŒ Ù„ÙƒÙ† Ø§Ø®ØªØ± Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ ÙˆØ±ÙƒØ² Ø¹Ù„ÙŠÙ‡Ø§ ğŸ“š",
  "ÙƒÙŠÙ Ø£ØªØ­Ø³Ù† Ø¨Ø§Ù„Ø¯Ø±Ø§Ø³Ø©": "Ø§Ø¯Ø±Ø³ ÙŠÙˆÙ…ÙŠØ§Ù‹ØŒ Ù…Ø§Ø±Ø³ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŒ ÙˆØ·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ğŸ’ª",
  "Ù‡Ø³Ø§ Ø§Ù„Ø³Ø§Ø¹Ø© ÙƒÙ…": new Date().toLocaleTimeString('ar-SA'),
  "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹": new Date().toLocaleDateString('ar-SA', { weekday: 'long' }),
};

// =================== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø§Ù†Ø§Øª =================
function switchTab(tab) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  event.target.classList.add('active');
}

// =================== Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ø·Ø§Ù„Ø¨) =================
let currentUserEmail = "";

function loginUser() {
  const email = document.getElementById('userEmail').value.trim();
  if (!email) { alert('Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'); return; }
  currentUserEmail = email;
  document.getElementById('loginSection').style.display = 'none';
  document.getElementById('userPanel').style.display = 'block';
  loadUserCourses();
  loadUserQuestions();
}

function addUserQuestion() {
  const question = document.getElementById('userQuestion').value.trim();
  if (!question) { alert('Ø£ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø£ÙˆÙ„Ø§Ù‹'); return; }
  let questions = JSON.parse(localStorage.getItem('questions') || '[]');
  questions.push({ email: currentUserEmail, text: question, date: new Date().toLocaleString('ar-SA'), answered: false });
  localStorage.setItem('questions', JSON.stringify(questions));
  document.getElementById('userQuestion').value = '';
  loadUserQuestions();
  alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø³Ø¤Ø§Ù„Ùƒ!');
}

function loadUserCourses() {
  const courses = JSON.parse(localStorage.getItem('courses') || '[]');
  const list = document.getElementById('userCoursesList');
  list.innerHTML = courses.length ? courses.map(c => `
    <div class="course-box">
      <h3>${c.icon} ${c.name}</h3>
      <p>ğŸ‘¨â€ğŸ« Ø§Ù„Ù…Ø¹Ù„Ù…: ${c.teacher}</p>
      <p>â° Ø§Ù„ÙˆÙ‚Øª: ${c.time}</p>
      <button class="whatsapp-btn" onclick="openWhatsApp('${c.phone}')" style="margin-top: 10px;">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù…</button>
    </div>
  `).join('') : '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
}

function loadUserQuestions() {
  const questions = JSON.parse(localStorage.getItem('questions') || '[]');
  const userQs = questions.filter(q => q.email === currentUserEmail);
  const list = document.getElementById('userQuestionsList');
  list.innerHTML = userQs.length ? userQs.map(q => `
    <div class="question-item">
      <div>
        <strong>${q.email}</strong>
        <p>${q.text}</p>
        <small>${q.date}</small>
        ${q.answered ? '<div class="success-msg">âœ… ØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ</div>' : '<div class="error-msg">â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</div>'}
      </div>
    </div>
  `).join('') : '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯</p>';
}

function openWhatsApp(phone) {
  window.open(`https://wa.me/${phone}?text=Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„Ø¯ÙˆØ±Ø©`, '_blank');
}

function logoutUser() {
  currentUserEmail = "";
  document.getElementById('loginSection').style.display = 'block';
  document.getElementById('userPanel').style.display = 'none';
  document.getElementById('userEmail').value = '';
}

// =================== Ø§Ù„Ø£Ø¯Ù…Ù† =================
let adminLoggedIn = false;

function loginAdmin() {
  const password = document.getElementById('adminPassword').value;
  if (password !== ADMIN_PASSWORD) { alert('âŒ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©'); return; }
  adminLoggedIn = true;
  document.getElementById('adminLoginSection').style.display = 'none';
  document.getElementById('adminPanel').style.display = 'block';
  loadAdminCourses();
  loadAdminQuestions();
  loadDesignSettings();
}

function setIcon(icon) {
  document.getElementById('adminCourseIcon').value = icon;
}

function addAdminCourse() {
  const name = document.getElementById('adminCourseName').value.trim();
  const teacher = document.getElementById('adminTeacherName').value.trim();
  const time = document.getElementById('adminCourseTime').value.trim();
  const phone = document.getElementById('adminTeacherPhone').value.trim();
  const icon = document.getElementById('adminCourseIcon').value.trim();

  if (!name || !teacher || !time || !phone || !icon) { alert('Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨'); return; }

  let courses = JSON.parse(localStorage.getItem('courses') || '[]');
  courses.push({ name, teacher, time, phone, icon });
  localStorage.setItem('courses', JSON.stringify(courses));
  
  document.getElementById('adminCourseName').value = '';
  document.getElementById('adminTeacherName').value = '';
  document.getElementById('adminCourseTime').value = '';
  document.getElementById('adminTeacherPhone').value = '';
  document.getElementById('adminCourseIcon').value = '';
  
  loadAdminCourses();
  loadUserCourses();
  alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯ÙˆØ±Ø©!');
}

function loadAdminCourses() {
  const courses = JSON.parse(localStorage.getItem('courses') || '[]');
  const list = document.getElementById('adminCoursesList');
  list.innerHTML = courses.length ? courses.map((c, i) => `
    <div class="course-card">
      <div class="course-info">
        <h3>${c.icon} ${c.name}</h3>
        <p>ğŸ‘¨â€ğŸ« ${c.teacher}</p>
        <p>â° ${c.time}</p>
        <p>ğŸ“± ${c.phone}</p>
      </div>
      <button class="delete-btn" onclick="deleteCourse(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
    </div>
  `).join('') : '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª</p>';
}

function deleteCourse(index) {
  if (!confirm('Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) return;
  let courses = JSON.parse(localStorage.getItem('courses') || '[]');
  courses.splice(index, 1);
  localStorage.setItem('courses', JSON.stringify(courses));
  loadAdminCourses();
  loadUserCourses();
}

function addAdminQuestion() {
  const question = document.getElementById('adminNewQuestion').value.trim();
  if (!question) { alert('Ø£ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹'); return; }
  let questions = JSON.parse(localStorage.getItem('questions') || '[]');
  questions.push({ email: 'Ø§Ù„Ø£Ø¯Ù…Ù†', text: question, date: new Date().toLocaleString('ar-SA'), answered: true });
  localStorage.setItem('questions', JSON.stringify(questions));
  document.getElementById('adminNewQuestion').value = '';
  loadAdminQuestions();
  loadUserQuestions();
  alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©!');
}

function loadAdminQuestions() {
  const questions = JSON.parse(localStorage.getItem('questions') || '[]');
  const list = document.getElementById('adminQuestionsList');
  list.innerHTML = questions.length ? questions.map((q, i) => `
    <div class="question-item">
      <div>
        <strong>${q.email}</strong>
        <p>${q.text}</p>
        <small>${q.date}</small>
      </div>
      <button class="delete-btn" onclick="deleteQuestion(${i})">ğŸ—‘ï¸</button>
    </div>
  `).join('') : '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø©</p>';
}

function deleteQuestion(index) {
  if (!confirm('Ù…ØªØ£ÙƒØ¯ØŸ')) return;
  let questions = JSON.parse(localStorage.getItem('questions') || '[]');
  questions.splice(index, 1);
  localStorage.setItem('questions', JSON.stringify(questions));
  loadAdminQuestions();
  loadUserQuestions();
}

function applyDesign() {
  const design = {
    main: document.getElementById('mainColor').value,
    second: document.getElementById('secondColor').value
  };
  localStorage.setItem('design', JSON.stringify(design));
  updateDesign(design);
  alert('âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙ…ÙŠÙ…!');
}

function loadDesignSettings() {
  const design = JSON.parse(localStorage.getItem('design') || '{"main":"#667eea","second":"#764ba2"}');
  document.getElementById('mainColor').value = design.main;
  document.getElementById('secondColor').value = design.second;
  updateDesign(design);
}

function updateDesign(design) {
  document.documentElement.style.setProperty('--primary', design.main);
  document.documentElement.style.setProperty('--secondary', design.second);
}

function logoutAdmin() {
  adminLoggedIn = false;
  document.getElementById('adminLoginSection').style.display = 'block';
  document.getElementById('adminPanel').style.display = 'none';
  document.getElementById('adminPassword').value = '';
}

// =================== Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ =================
let currentChatEmail = "";

function loginChat() {
  const email = document.getElementById('chatEmail').value.trim();
  if (!email) { alert('Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'); return; }
  currentChatEmail = email;
  document.getElementById('loginChatSection').style.display = 'none';
  document.getElementById('chatPanel').style.display = 'block';
  loadChatHistory();
}

function sendChatMessage() {
  const message = document.getElementById('chatInput').value.trim();
  if (!message) return;

  addChatMessage(currentChatEmail, message, false);
  
  // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
  setTimeout(() => {
    let response = aiResponses[message] || "Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ! ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ³Ø£Ù„ Ø¹Ù† Ø§Ù„Ø¯ÙˆØ±Ø§ØªØŒ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©ØŒ Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø± ğŸ˜Š";
    addChatMessage('Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ', response, true);
  }, 500);

  document.getElementById('chatInput').value = '';
}

function addChatMessage(sender, message, isAI) {
  let chats = JSON.parse(localStorage.getItem('chats') || '[]');
  chats.push({ sender, message, isAI, date: new Date().toLocaleString('ar-SA') });
  localStorage.setItem('chats', JSON.stringify(chats));
  loadChatHistory();
  document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
}

function loadChatHistory() {
  const chats = JSON.parse(localStorage.getItem('chats') || '[]');
  const userChats = chats.filter(c => c.sender === currentChatEmail || c.sender === 'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ');
  const messages = document.getElementById('chatMessages');
  messages.innerHTML = userChats.map(c => `
    <div class="ai-message ${c.isAI ? 'ai-reply' : 'user-message'}">
      <strong>${c.sender}:</strong>
      <p>${c.message}</p>
      <small>${c.date}</small>
    </div>
  `).join('');
}

function logoutChat() {
  currentChatEmail = "";
  document.getElementById('loginChatSection').style.display = 'block';
  document.getElementById('chatPanel').style.display = 'none';
  document.getElementById('chatEmail').value = '';
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('DOMContentLoaded', () => {
  loadDesignSettings();
});
</script>
</body>
</html>
