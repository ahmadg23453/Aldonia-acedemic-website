<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø¯Ù†ÙŠØ§ | Super Admin Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.8);
            --primary: #4338ca;
            --accent: #db2777;
            --success: #059669;
            --text: #111827;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body {
            background: radial-gradient(circle at top right, #e0e7ff, #fdf2f8, #f5f3ff);
            background-attachment: fixed; min-height: 100vh; display: flex; color: var(--text);
        }

        /* Sidebar */
        aside {
            width: 280px; background: var(--glass); backdrop-filter: blur(25px);
            border-left: 1px solid rgba(255,255,255,0.5); position: fixed; height: 100vh;
            right: 0; padding: 30px 20px; z-index: 1000; display: flex; flex-direction: column;
            box-shadow: -5px 0 25px rgba(0,0,0,0.05);
        }

        .nav-link {
            width: 100%; padding: 14px; border-radius: 15px; border: none; background: transparent;
            display: flex; align-items: center; gap: 12px; color: var(--text); font-weight: 700;
            cursor: pointer; margin-bottom: 8px; transition: 0.3s;
        }
        .nav-link.active, .nav-link:hover { background: var(--primary); color: white; transform: scale(1.02); }

        main { flex: 1; margin-right: 280px; padding: 30px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ù„Ø£Ø¯Ù…Ù† */
        .news-ticker {
            background: var(--accent); color: white; padding: 10px; border-radius: 12px;
            margin-bottom: 25px; display: none; font-weight: bold; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } }

        .card {
            background: var(--glass); backdrop-filter: blur(15px); border-radius: 25px;
            padding: 25px; border: 1px solid rgba(255,255,255,0.6); margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; }

        .stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 25px; }
        .stat-card { background: white; padding: 20px; border-radius: 20px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.02); }
        .stat-card i { font-size: 1.5rem; color: var(--primary); margin-bottom: 10px; }

        input, select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #ddd; margin-top: 8px; background: rgba(255,255,255,0.9); }
        .btn-p { background: var(--primary); color: white; border: none; padding: 14px; border-radius: 12px; font-weight: 800; cursor: pointer; width: 100%; margin-top: 15px; }
        
        /* ØªÙ„ÙˆÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ */
        .status-active { color: var(--success); font-weight: bold; }
        .status-pending { color: var(--accent); font-weight: bold; }

        .section { display: none; }
        .section.active { display: block; animation: fadeInUp 0.5s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 1024px) { aside { width: 85px; } aside span { display: none; } main { margin-right: 85px; } .stat-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>

    <aside>
        <div style="text-align:center; margin-bottom:40px; color:var(--primary); font-size:1.8rem;">
            <i class="fas fa-crown"></i><span style="font-weight:900;"> Ø§Ù„Ø¯Ù†ÙŠØ§</span>
        </div>
        <button class="nav-link active" onclick="showTab('h', this)"><i class="fas fa-th-large"></i> <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></button>
        <button class="nav-link" onclick="showTab('c', this)"><i class="fas fa-graduation-cap"></i> <span>Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©</span></button>
        <button class="nav-link" onclick="showTab('a', this)" style="margin-top:auto; color:var(--accent);"><i class="fas fa-user-shield"></i> <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></button>
    </aside>

    <main>
        <div id="ticker" class="news-ticker"></div>

        <div id="h" class="section active">
            <div id="login-screen" class="card" style="max-width:450px; margin: 60px auto; text-align:center;">
                <h2 style="margin-bottom:20px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ ğŸ‘‹</h2>
                <input type="text" id="st-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
                <button class="btn-p" onclick="stLogin()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
            </div>

            <div id="student-dash" style="display:none;">
                <div class="card" style="background: linear-gradient(135deg, var(--primary), #6366f1); color:white;">
                    <h2 id="welcome-user"></h2>
                    <p id="st-status-msg" style="margin-top:10px; opacity:0.9;"></p>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h3>ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
                        <p id="ai-resp" style="background:rgba(255,255,255,0.4); padding:15px; border-radius:15px; margin:15px 0;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ AI Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯ÙƒØŸ</p>
                        <input type="text" id="ai-in" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡..." onkeypress="if(event.key==='Enter') smartAI()">
                    </div>
                    <div class="card">
                        <h3>ğŸ“Š ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</h3>
                        <div id="st-grade-box" style="margin-top:20px; text-align:center;">
                            <span style="font-size:3rem; font-weight:900; color:var(--primary);" id="my-grade">--</span>
                            <p id="my-comment" style="color:#64748b;"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="c" class="section">
            <div id="locked-msg" class="card" style="text-align:center; display:none;">
                <i class="fas fa-lock fa-4x" style="color:var(--accent); margin-bottom:20px;"></i>
                <h2>Ù…Ø­ØªÙˆÙ‰ Ù…ØºÙ„Ù‚!</h2>
                <p>Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ø¯ÙˆØ±Ø§Øª.</p>
            </div>
            <div id="content-unlocked">
                <h1 style="margin-bottom:20px;">Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ù„Ù…Ù„Ø®ØµØ§Øª ğŸ“‚</h1>
                <div id="courses-grid" class="grid"></div>
            </div>
        </div>

        <div id="a" class="section">
            <div id="admin-auth" class="card" style="max-width:400px; margin:auto; text-align:center;">
                <h3>ğŸ” Super Admin Access</h3>
                <input type="password" id="admin-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                <button class="btn-p" onclick="authAdmin()">Ø¯Ø®ÙˆÙ„</button>
            </div>

            <div id="admin-panel" style="display:none;">
                <div class="stat-grid">
                    <div class="stat-card"><i class="fas fa-users"></i><h4>Ø·Ù„Ø§Ø¨</h4><p id="s-sts">0</p></div>
                    <div class="stat-card"><i class="fas fa-book"></i><h4>Ù…ÙˆØ§Ø¯</h4><p id="s-crs">0</p></div>
                    <div class="stat-card"><i class="fas fa-clock"></i><h4>Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„</h4><p id="s-pen">0</p></div>
                    <div class="stat-card"><i class="fas fa-check-circle"></i><h4>Ù†Ø´Ø·ÙˆÙ†</h4><p id="s-act">0</p></div>
                </div>

                <div class="grid">
                    <div class="card">
                        <h4>ğŸ“¢ Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h4>
                        <input id="ad-news" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ Ù„ÙƒÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨...">
                        <button class="btn-p" style="background:var(--accent);" onclick="setNews()">Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
                    </div>
                    <div class="card">
                        <h4>â• Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©</h4>
                        <input id="ad-cn" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©">
                        <input id="ad-cl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù (PDF)">
                        <button class="btn-p" onclick="addCourse()">Ø±ÙØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</button>
                    </div>
                </div>

                <div class="card">
                    <h4>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h4>
                    <table style="width:100%; border-collapse:collapse; margin-top:15px; text-align:right;">
                        <thead>
                            <tr style="border-bottom:2px solid #eee;">
                                <th style="padding:10px;">Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„Ù…ÙˆØ¹Ø¯/Ø§Ù„Ø¹Ù„Ø§Ù…Ø©</th>
                                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="st-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script>
        let curU = "";
        
        function showTab(id, btn) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(btn) btn.classList.add('active');
            render();
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨
        function stLogin() {
            let n = document.getElementById('st-name').value;
            if(!n) return;
            curU = n;
            let sts = JSON.parse(localStorage.getItem('sts_db') || '{}');
            if(!sts[n]) {
                sts[n] = { status: 'pending', note: '', grade: '--', comment: '' };
                localStorage.setItem('sts_db', JSON.stringify(sts));
            }
            document.getElementById('login-screen').style.display='none';
            document.getElementById('student-dash').style.display='block';
            document.getElementById('welcome-user').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ${n} ğŸ‘‘`;
            render();
        }

        function authAdmin() {
            if(document.getElementById('admin-pass').value === "AAAA1234") {
                document.getElementById('admin-auth').style.display='none';
                document.getElementById('admin-panel').style.display='block';
                render();
            }
        }

        // Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
        function setNews() {
            localStorage.setItem('ad_news', document.getElementById('ad-news').value);
            render();
        }

        function addCourse() {
            let c = JSON.parse(localStorage.getItem('crs_db') || '[]');
            c.push({id: Date.now(), n: document.getElementById('ad-cn').value, l: document.getElementById('ad-cl').value});
            localStorage.setItem('crs_db', JSON.stringify(c));
            render();
        }

        function toggleStatus(n) {
            let sts = JSON.parse(localStorage.getItem('sts_db'));
            sts[n].status = (sts[n].status === 'pending' ? 'active' : 'pending');
            localStorage.setItem('sts_db', JSON.stringify(sts));
            render();
        }

        function updateStData(n) {
            let sts = JSON.parse(localStorage.getItem('sts_db'));
            let newNote = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø£Ùˆ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©:", sts[n].note);
            let newGrade = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© (Ù…Ø«Ù„Ø§Ù‹ 95%):", sts[n].grade);
            if(newNote !== null) sts[n].note = newNote;
            if(newGrade !== null) sts[n].grade = newGrade;
            localStorage.setItem('sts_db', JSON.stringify(sts));
            render();
        }

        function render() {
            const sts = JSON.parse(localStorage.getItem('sts_db') || '{}');
            const crs = JSON.parse(localStorage.getItem('crs_db') || '[]');
            const news = localStorage.getItem('ad_news');

            // Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
            if(news) {
                document.getElementById('ticker').innerText = "ğŸ“¢ Ø¹Ø§Ø¬Ù„: " + news;
                document.getElementById('ticker').style.display = 'block';
            }

            // ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø·Ø§Ù„Ø¨
            if(curU) {
                let me = sts[curU];
                document.getElementById('st-status-msg').innerText = me.status === 'pending' ? "Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©..." : "Ø­Ø³Ø§Ø¨Ùƒ Ù†Ø´Ø· ğŸ”“ - Ù…Ù„Ø§Ø­Ø¸Ø©: " + me.note;
                document.getElementById('my-grade').innerText = me.grade;
                
                if(me.status === 'pending') {
                    document.getElementById('locked-msg').style.display = 'block';
                    document.getElementById('content-unlocked').style.display = 'none';
                } else {
                    document.getElementById('locked-msg').style.display = 'none';
                    document.getElementById('content-unlocked').style.display = 'block';
                }
            }

            // Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ÙˆØ§Ø¯
            document.getElementById('courses-grid').innerHTML = crs.map(c => `
                <div class="card">
                    <h3>${c.n}</h3>
                    <a href="${c.l}" target="_blank" class="btn-p" style="display:block; text-align:center; text-decoration:none;">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø®Øµ PDF</a>
                </div>
            `).join('');

            // Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - Ø§Ù„Ø·Ù„Ø§Ø¨
            let stCount = 0, penCount = 0;
            let tableHTML = "";
            for(let name in sts) {
                stCount++;
                if(sts[name].status === 'pending') penCount++;
                tableHTML += `
                    <tr style="border-bottom:1px solid #eee;">
                        <td style="padding:10px;">${name}</td>
                        <td class="status-${sts[name].status}">${sts[name].status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…Ø¹Ù„Ù‚'}</td>
                        <td>${sts[name].note} | ${sts[name].grade}</td>
                        <td>
                            <button onclick="toggleStatus('${name}')" style="color:blue; border:none; background:none; cursor:pointer;">ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„</button>
                            <button onclick="updateStData('${name}')" style="color:green; border:none; background:none; cursor:pointer; margin-right:10px;">ØªØ¹Ø¯ÙŠÙ„</button>
                        </td>
                    </tr>
                `;
            }
            document.getElementById('st-table-body').innerHTML = tableHTML;
            document.getElementById('s-sts').innerText = stCount;
            document.getElementById('s-crs').innerText = crs.length;
            document.getElementById('s-pen').innerText = penCount;
            document.getElementById('s-act').innerText = stCount - penCount;
        }

        // AI Ø§Ù„Ø°ÙƒÙŠ
        function smartAI() {
            let inp = document.getElementById('ai-in').value.toLowerCase();
            let res = "Ø³Ø¤Ø§Ù„ Ù…Ù…ØªØ§Ø²! ÙƒÙˆÙ†ÙŠ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠØŒ Ø£Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø®ØµØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙˆØ¬Ø¯ÙˆÙ„Ø© ÙˆÙ‚ØªÙƒ Ø¬ÙŠØ¯Ø§Ù‹.";
            if(inp.includes("Ù…ÙˆØ¹Ø¯")) res = "ÙŠÙ…ÙƒÙ†Ùƒ Ø±Ø¤ÙŠØ© Ù…ÙˆØ¹Ø¯ Ø­ØµØªÙƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©.";
            if(inp.includes("Ø¹Ù„Ø§Ù…Ù‡") || inp.includes("Ù†ØªÙŠØ¬Ù‡")) res = "Ø¹Ù„Ø§Ù…ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªØ¸Ù‡Ø± ÙÙŠ Ù‚Ø³Ù… (ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ) Ø¨Ø¬Ø§Ù†Ø¨ Ø´Ø§Øª AI.";
            if(inp.includes("ØªÙØ¹ÙŠÙ„")) res = "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø¹Ù„Ù‚Ø§Ù‹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù† Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ.";
            
            document.getElementById('ai-resp').innerText = res;
            document.getElementById('ai-in').value = "";
        }

        window.onload = render;
    </script>
</body>
</html>
