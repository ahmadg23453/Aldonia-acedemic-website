<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aldonia Quiz AI | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #059669; --bg: #f0fdf4; --card: #ffffff; --text: #064e3b; }
        body.theme-dark { --primary: #10b981; --bg: #064e3b; --card: #022c22; --text: #ecfdf5; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); transition: 0.3s; line-height: 1.6; }

        .app-header { background: var(--card); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); sticky; top:0; z-index:100; }
        .container { max-width: 1000px; margin: 2rem auto; padding: 0 1rem; }
        
        .card { background: var(--card); border-radius: 20px; padding: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.03); margin-bottom: 2rem; border: 1px solid rgba(0,0,0,0.05); }
        
        /* Quiz System Styles */
        .quiz-option { display: block; padding: 12px; background: rgba(0,0,0,0.02); border: 2px solid #e2e8f0; border-radius: 12px; margin-top: 10px; cursor: pointer; transition: 0.2s; }
        .quiz-option:hover { border-color: var(--primary); background: rgba(5, 150, 105, 0.05); }
        .quiz-option.selected { background: var(--primary); color: white; border-color: var(--primary); }

        /* Navigation */
        .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; background: rgba(0,0,0,0.03); padding: 5px; border-radius: 15px; }
        .nav-link { flex: 1; padding: 10px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; background: transparent; color: var(--text); }
        .nav-link.active { background: var(--primary); color: white; }

        input, select, textarea { width: 100%; padding: 12px; border-radius: 12px; border: 2px solid #e2e8f0; margin-top: 8px; background: var(--card); color: var(--text); }
        .btn-prime { background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 12px; cursor: pointer; font-weight: 700; width: 100%; margin-top: 15px; }
        
        #resultArea { text-align: center; display: none; padding: 20px; border-radius: 15px; background: #ecfdf5; margin-top: 15px; }
    </style>
</head>
<body id="mainBody">

    <header class="app-header">
        <h2 style="color:var(--primary)"><i class="fas fa-graduation-cap"></i> Aldonia Quiz AI</h2>
        <div class="nav-tabs">
            <button class="nav-link active" onclick="showPage('studentPage')">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</button>
            <button class="nav-link" onclick="showPage('adminPage')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
        </div>
    </header>

    <div class="container">
        <div id="studentPage" class="view-content">
            <div id="stLogin" class="card" style="max-width: 400px; margin: auto;">
                <h3 style="text-align:center">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨</h3>
                <input type="text" id="stNameInp" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
                <button class="btn-prime" onclick="stLogin()">Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ</button>
            </div>

            <div id="stDash" style="display:none">
                <div class="card" style="background: var(--primary); color:white">
                    <h2 id="welcomeText">Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙŠØ§ Ø¨Ø·Ù„!</h2>
                    <p>Ø¬Ø§Ù‡Ø² Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</p>
                </div>

                <div class="card" id="quizCard">
                    <h3><i class="fas fa-vial"></i> Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
                    <div id="quizContainer">
                        <p id="questionText" style="font-size: 1.2rem; font-weight: bold; margin-bottom: 15px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¯ÙŠØ±.</p>
                        <div id="optionsContainer"></div>
                        <button id="nextBtn" class="btn-prime" style="display:none" onclick="submitAnswer()">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</button>
                    </div>
                    <div id="resultArea">
                        <h2 id="scoreText">Ù†ØªÙŠØ­ØªÙƒ: 0/0</h2>
                        <p id="aiFeedback">Ø§Ù„Ù€ AI ÙŠÙ‚ÙˆÙ… Ø¨ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¦Ùƒ...</p>
                        <button class="btn-prime" style="background:var(--text)" onclick="resetQuiz()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="adminPage" class="view-content" style="display:none">
            <div id="adLogin" class="card" style="max-width: 400px; margin: auto;">
                <h3>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</h3>
                <input type="password" id="adPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
                <button class="btn-prime" onclick="adLogin()">ØªØ­Ù‚Ù‚</button>
            </div>

            <div id="adPanel" style="display:none">
                <div class="card">
                    <h4>â• Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h4>
                    <input type="text" id="qInp" placeholder="Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
                        <input type="text" id="opt1" placeholder="Ø®ÙŠØ§Ø± 1">
                        <input type="text" id="opt2" placeholder="Ø®ÙŠØ§Ø± 2">
                        <input type="text" id="opt3" placeholder="Ø®ÙŠØ§Ø± 3">
                        <input type="text" id="opt4" placeholder="Ø®ÙŠØ§Ø± 4">
                    </div>
                    <select id="correctOpt">
                        <option value="0">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ Ø®ÙŠØ§Ø± 1</option>
                        <option value="1">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ Ø®ÙŠØ§Ø± 2</option>
                        <option value="2">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ Ø®ÙŠØ§Ø± 3</option>
                        <option value="3">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ Ø®ÙŠØ§Ø± 4</option>
                    </select>
                    <button class="btn-prime" onclick="addQuestion()">Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙÙŠ Ø§Ù„Ø¨Ù†Ùƒ</button>
                </div>

                <div class="card">
                    <h4>ğŸ“Š Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h4>
                    <div id="adQuestionsList"></div>
                    <button class="btn-prime" style="background:#ef4444" onclick="clearAllData()">ØªØµÙÙŠØ± ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ âš ï¸</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentQIndex = 0;
        let score = 0;
        let selectedOpt = null;
        let currentUser = "";

        function showPage(id) {
            document.querySelectorAll('.view-content').forEach(v => v.style.display = 'none');
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById(id).style.display = 'block';
            event.currentTarget.classList.add('active');
        }

        // Student Logic
        function stLogin() {
            const name = document.getElementById('stNameInp').value;
            if(!name) return;
            currentUser = name;
            document.getElementById('stLogin').style.display = 'none';
            document.getElementById('stDash').style.display = 'block';
            document.getElementById('welcomeText').innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙŠØ§ ${name} ğŸ‘‹`;
            loadQuiz();
        }

        function loadQuiz() {
            const questions = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            if(questions.length === 0) return;

            const q = questions[currentQIndex];
            document.getElementById('questionText').innerText = q.text;
            document.getElementById('nextBtn').style.display = 'block';
            
            const optionsHtml = q.opts.map((o, i) => `
                <div class="quiz-option" onclick="selectOption(${i})" id="opt_${i}">${o}</div>
            `).join('');
            document.getElementById('optionsContainer').innerHTML = optionsHtml;
        }

        function selectOption(index) {
            selectedOpt = index;
            document.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
            document.getElementById('opt_'+index).classList.add('selected');
        }

        function submitAnswer() {
            if(selectedOpt === null) return alert("Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø©!");
            
            const questions = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            if(selectedOpt === parseInt(questions[currentQIndex].correct)) {
                score++;
            }

            currentQIndex++;
            selectedOpt = null;

            if(currentQIndex < questions.length) {
                loadQuiz();
            } else {
                showResults(questions.length);
            }
        }

        function showResults(total) {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultArea').style.display = 'block';
            document.getElementById('scoreText').innerText = `Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${score} Ù…Ù† ${total}`;
            
            let feedback = "";
            if(score === total) feedback = "Ù…Ø°Ù‡Ù„! Ø£Ù†Øª Ø¹Ø¨Ù‚Ø±ÙŠØŒ Ø§Ù„Ù€ AI ÙØ®ÙˆØ± Ø¨Ùƒ Ø¬Ø¯Ø§Ù‹.";
            else if(score >= total/2) feedback = "Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯ØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³Ù† Ø£ÙƒØ«Ø± Ø¨Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¯Ø±Ø§Ø³Ø©.";
            else feedback = "Ù„Ø§ ØªØ­Ø²Ù†ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙˆØ§Ù„Ù€ AI Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.";
            document.getElementById('aiFeedback').innerText = feedback;
        }

        // Admin Logic
        function adLogin() {
            if(document.getElementById('adPass').value === "AAAA1234") {
                document.getElementById('adLogin').style.display = 'none';
                document.getElementById('adPanel').style.display = 'block';
                renderAdminList();
            } else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø·Ø£");
        }

        function addQuestion() {
            let q = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            const newQ = {
                text: document.getElementById('qInp').value,
                opts: [document.getElementById('opt1').value, document.getElementById('opt2').value, document.getElementById('opt3').value, document.getElementById('opt4').value],
                correct: document.getElementById('correctOpt').value
            };
            q.push(newQ);
            localStorage.setItem('ald_quiz', JSON.stringify(q));
            alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!");
            renderAdminList();
        }

        function renderAdminList() {
            const q = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            document.getElementById('adQuestionsList').innerHTML = q.map((item, i) => `
                <div style="padding:10px; border-bottom:1px solid #eee; display:flex; justify-content:space-between">
                    <span>${i+1}. ${item.text}</span>
                    <button onclick="deleteQ(${i})" style="color:red; border:none; background:none; cursor:pointer">Ø­Ø°Ù</button>
                </div>
            `).join('');
        }

        function deleteQ(index) {
            let q = JSON.parse(localStorage.getItem('ald_quiz') || '[]');
            q.splice(index, 1);
            localStorage.setItem('ald_quiz', JSON.stringify(q));
            renderAdminList();
        }

        function clearAllData() {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡!")) {
                localStorage.clear();
                location.reload();
            }
        }

        function resetQuiz() {
            currentQIndex = 0;
            score = 0;
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultArea').style.display = 'none';
            loadQuiz();
        }
    </script>
</body>
</html>
