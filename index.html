<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø¯Ù†ÙŠØ§ Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #4f46e5; --bg: #f3f4f6; --sidebar: #ffffff; --card: #ffffff; --text: #1e293b; --wa: #25d366; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }

        /* Sidebar Ø§Ù„Ø«Ø§Ø¨Øª */
        aside { width: 260px; background: var(--sidebar); border-left: 1px solid #e2e8f0; padding: 20px; position: fixed; height: 100vh; right: 0; z-index: 1000; }
        .nav-link { width: 100%; padding: 12px; border-radius: 10px; border: none; background: none; display: flex; align-items: center; gap: 10px; color: var(--text); font-weight: 600; cursor: pointer; margin-bottom: 5px; text-align: right; }
        .nav-link.active { background: var(--primary); color: white; }

        main { flex: 1; margin-right: 260px; padding: 30px; }
        .section { display: none; }
        .active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { background: var(--card); border-radius: 15px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; border: 1px solid #e2e8f0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }

        input, select { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #cbd5e1; margin-top: 8px; }
        .btn-p { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn-wa { background: var(--wa); color: white; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 10px; border-radius: 8px; font-weight: bold; margin-top: 10px; }
        
        .del-btn { color: #ef4444; cursor: pointer; border: none; background: none; font-size: 0.8rem; }
    </style>
</head>
<body>

    <aside>
        <h2 style="color:var(--primary); text-align:center; margin-bottom:30px;">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¯Ù†ÙŠØ§</h2>
        <button class="nav-link active" onclick="showTab('homeT', this)"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="nav-link" onclick="showTab('coursesT', this)"><i class="fas fa-book"></i> Ø§Ù„Ø¯ÙˆØ±Ø§Øª</button>
        <button class="nav-link" onclick="showTab('teachersT', this)"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</button>
        <button class="nav-link" onclick="showTab('quizT', this)"><i class="fas fa-vial"></i> Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</button>
        <button class="nav-link" onclick="showTab('adminT', this)" style="color:#ef4444; margin-top:30px;"><i class="fas fa-user-shield"></i> Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
    </aside>

    <main>
        <div id="homeT" class="section active">
            <div id="stLogin" class="card" style="max-width:400px; margin:auto; text-align:center;">
                <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨</h3>
                <input type="text" id="stNameIn" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…Ù„">
                <button class="btn-p" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
            </div>
            <div id="stDash" style="display:none;">
                <div class="card" style="background:var(--primary); color:white;">
                    <h2 id="helloSt"></h2>
                    <p id="stPrivateNote" style="margin-top:10px; font-weight:bold;"></p>
                </div>
                <div class="card">
                    <h3>ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ AI Ø§Ù„Ø°ÙƒÙŠ</h3>
                    <p id="aiMsg" style="margin:10px 0; background:#f8fafc; padding:10px; border-radius:8px;">Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</p>
                    <input type="text" id="aiIn" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ Ù…Ø§Ø¯Ø©...">
                    <button class="btn-p" onclick="askAI()">Ø¥Ø±Ø³Ø§Ù„</button>
                </div>
            </div>
        </div>

        <div id="coursesT" class="section">
            <h2>Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© ğŸ“š</h2>
            <div id="cGrid" class="grid" style="margin-top:20px;"></div>
        </div>

        <div id="teachersT" class="section">
            <h2>ÙƒØ§Ø¯Ø± Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ğŸ‘¨â€ğŸ«</h2>
            <div id="tGrid" class="grid" style="margin-top:20px;"></div>
        </div>

        <div id="quizT" class="section">
            <div class="card">
                <h2>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ğŸ“</h2>
                <div id="quizContent">
                    <h3 id="qText" style="margin-top:15px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø©.</h3>
                    <div id="qOpts"></div>
                    <button class="btn-p" id="nextBtn" style="display:none" onclick="handleQuiz()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
                <div id="qRes" style="display:none; text-align:center;">
                    <h2 id="finalScoreText"></h2>
                    <button class="btn-p" onclick="location.reload()">Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
                </div>
            </div>
        </div>

        <div id="adminT" class="section">
            <div id="adLogin" class="card" style="max-width:400px; margin:auto;">
                <h3>ğŸ” Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
                <input type="password" id="adPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                <button class="btn-p" onclick="authAdmin()">ØªØ­Ù‚Ù‚</button>
            </div>
            <div id="adPanel" style="display:none;">
                <div class="grid">
                    <div class="card">
                        <h4>â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø©</h4>
                        <input id="adCN" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©">
                        <input id="adCT" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">
                        <input id="adCP" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        <button class="btn-p" onclick="saveItem('course')">Ø­ÙØ¸</button>
                    </div>
                    <div class="card">
                        <h4>â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù…</h4>
                        <input id="adTN" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…">
                        <input id="adTS" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©">
                        <input id="adTP" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù…">
                        <button class="btn-p" onclick="saveItem('teacher')">Ø­ÙØ¸</button>
                    </div>
                    <div class="card">
                        <h4>â• Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„</h4>
                        <input id="adQT" placeholder="Ø§Ù„Ø³Ø¤Ø§Ù„">
                        <input id="adO1" placeholder="Ø®ÙŠØ§Ø± 1"> <input id="adO2" placeholder="Ø®ÙŠØ§Ø± 2">
                        <select id="adCorrect"><option value="0">Ø®ÙŠØ§Ø± 1 ØµØ­</option><option value="1">Ø®ÙŠØ§Ø± 2 ØµØ­</option></select>
                        <button class="btn-p" onclick="saveItem('quiz')">Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„</button>
                    </div>
                </div>
                <div class="card">
                    <h4>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø­ØµØµ</h4>
                    <div id="adStList"></div>
                    <div id="editBox" style="display:none; margin-top:10px; background:#fffbeb; padding:10px; border-radius:10px;">
                        <h5>ØªØ®ØµÙŠØµ Ù„Ù€: <span id="targetName"></span></h5>
                        <input id="targetSched" placeholder="Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø­ØµØ©">
                        <button class="btn-p" onclick="saveStNote()">Ø­ÙØ¸</button>
                    </div>
                </div>
                <div class="card">
                    <h4>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h4>
                    <input id="adMainPhone" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø£Ø¯Ù…Ù† Ù„Ù„Ø¯ÙØ¹">
                    <button class="btn-p" onclick="localStorage.setItem('adPh', document.getElementById('adMainPhone').value); alert('ØªÙ… Ø§Ù„Ø­ÙØ¸'); render();">Ø­ÙØ¸ Ø§Ù„Ø±Ù‚Ù…</button>
                </div>
                <div class="card" id="manageList"></div>
            </div>
        </div>
    </main>

    <script>
        let curU = "", qIdx = 0, score = 0, selected = null, editTarget = "";

        function showTab(id, b) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById(id).classList.add('active'); b.classList.add('active');
            render();
        }

        function login() {
            let n = document.getElementById('stNameIn').value; if(!n) return;
            curU = n; let sts = JSON.parse(localStorage.getItem('sts')||'[]');
            if(!sts.includes(n)) sts.push(n); localStorage.setItem('sts', JSON.stringify(sts));
            document.getElementById('stLogin').style.display='none'; document.getElementById('stDash').style.display='block';
            document.getElementById('helloSt').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ${n}`; render();
        }

        function saveItem(type) {
            let data = JSON.parse(localStorage.getItem(type)||'[]');
            if(type==='course') data.push({id:Date.now(), n:document.getElementById('adCN').value, t:document.getElementById('adCT').value, p:document.getElementById('adCP').value});
            if(type==='teacher') data.push({id:Date.now(), n:document.getElementById('adTN').value, s:document.getElementById('adTS').value, ph:document.getElementById('adTP').value});
            if(type==='quiz') data.push({t:document.getElementById('adQT').value, o:[document.getElementById('adO1').value, document.getElementById('adO2').value], c:document.getElementById('adCorrect').value});
            localStorage.setItem(type, JSON.stringify(data)); render(); alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!");
        }

        function render() {
            const adPh = localStorage.getItem('adPh') || "";
            const courses = JSON.parse(localStorage.getItem('course')||'[]');
            const teachers = JSON.parse(localStorage.getItem('teacher')||'[]');
            const qs = JSON.parse(localStorage.getItem('quiz')||'[]');
            const sts = JSON.parse(localStorage.getItem('sts')||'[]');

            // Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø¯Ø±ÙˆØ³
            if(curU) document.getElementById('stPrivateNote').innerText = localStorage.getItem('p_'+curU) ? "ğŸ“Œ Ù…ÙˆØ¹Ø¯ Ø­ØµØªÙƒ: " + localStorage.getItem('p_'+curU) : "";
            
            // Ø§Ù„Ø¯ÙˆØ±Ø§Øª
            document.getElementById('cGrid').innerHTML = courses.map(c => `<div class="card"><h3>${c.n}</h3><p>Ø§Ù„Ø£Ø³ØªØ§Ø°: ${c.t}</p><h3 style="color:var(--primary)">${c.p}</h3><a href="https://wa.me/${adPh}?text=Ø¯ÙˆØ±Ø© ${c.n}" class="btn-wa" target="_blank">Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù† (Ø¯ÙØ¹)</a></div>`).join('');
            
            // Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
            document.getElementById('tGrid').innerHTML = teachers.map(t => `<div class="card" style="text-align:center;"><i class="fas fa-user-circle fa-4x" style="color:var(--primary)"></i><h3>${t.n}</h3><p>${t.s}</p><a href="https://wa.me/${t.ph}" class="btn-wa" target="_blank" style="background:#075e54">ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù…</a></div>`).join('');
            
            // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
            document.getElementById('manageList').innerHTML = "<h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h4>" + 
                courses.map(c => `<div style="display:flex; justify-content:space-between; margin-top:5px;"><span>${c.n}</span><button class="del-btn" onclick="del('${c.id}','course')">Ø­Ø°Ù</button></div>`).join('') +
                teachers.map(t => `<div style="display:flex; justify-content:space-between; margin-top:5px;"><span>${t.n}</span><button class="del-btn" onclick="del('${t.id}','teacher')">Ø­Ø°Ù</button></div>`).join('');
            
            // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ù„Ø£Ø¯Ù…Ù†
            document.getElementById('adStList').innerHTML = sts.map(s => `<button onclick="openEdit('${s}')" style="margin:5px; padding:5px; border-radius:5px; cursor:pointer;">${s}</button>`).join('');

            // Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
            if(qs.length > 0 && qIdx < qs.length) {
                document.getElementById('qText').innerText = qs[qIdx].t;
                document.getElementById('qOpts').innerHTML = qs[qIdx].o.map((o,i) => `<div onclick="selected=${i}; this.style.background='#ddd'" style="padding:10px; background:#f0f0f0; margin-top:5px; border-radius:5px; cursor:pointer;">${o}</div>`).join('');
                document.getElementById('nextBtn').style.display='block';
            }
        }

        function del(id, type) { let data = JSON.parse(localStorage.getItem(type)); localStorage.setItem(type, JSON.stringify(data.filter(x => x.id != id))); render(); }
        function openEdit(n) { editTarget=n; document.getElementById('editBox').style.display='block'; document.getElementById('targetName').innerText=n; }
        function saveStNote() { localStorage.setItem('p_'+editTarget, document.getElementById('targetSched').value); alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¹Ø¯"); render(); }
        function authAdmin() { if(document.getElementById('adPass').value === "AAAA1234") { document.getElementById('adLogin').style.display='none'; document.getElementById('adPanel').style.display='block'; render(); } }
        function askAI() { document.getElementById('aiMsg').innerText="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±..."; setTimeout(()=> { document.getElementById('aiMsg').innerText="AI: Ø¨Ø®ØµÙˆØµ Ø³Ø¤Ø§Ù„ÙƒØŒ Ø£Ù†ØµØ­Ùƒ Ø¨ØªÙ‚Ø³ÙŠÙ… ÙˆÙ‚ØªÙƒ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø£ÙˆÙ„ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ù†Ø¬Ø§Ø­!"; }, 600); }
        function handleQuiz() {
            const qs = JSON.parse(localStorage.getItem('quiz')||'[]');
            if(selected == qs[qIdx].c) score++; qIdx++; selected=null;
            if(qIdx < qs.length) render();
            else { document.getElementById('quizContent').style.display='none'; document.getElementById('qRes').style.display='block'; document.getElementById('finalScoreText').innerText=`Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${qs.length}`; }
        }

        window.onload = render;
    </script>
</body>
</html>
